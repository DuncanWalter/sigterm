import { defineEffect, Effect } from './effect'
import { Damage } from '../events/damage'
import { Listener, ConsumerArgs } from '../events/listener'
import { Vulnerability } from './vulnerability'

export const Invulnerability: * = defineEffect(
  'invulnerability',
  null,
  {
    stacked: false,
    delta: (x) => x,
    min: 1,
    max: 1,
  },
  (owner) => ({
    subjects: [owner],
    type: Damage,
  }),
  (owner, type) =>
    function*({ cancel }) {
      cancel()
    },
  [Vulnerability],
  [Damage]
)
